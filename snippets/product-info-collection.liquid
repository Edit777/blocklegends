{%- comment -%}
  Product info: Collection line
  Expects: {% render 'product-info-collection', block: block, product: product, collection: collection %}
{%- endcomment -%}

{%- assign s = block.settings -%}

{%- comment %}
  Choose which collection to show:
  1) If product is viewed inside a collection page, use that.
  2) Otherwise fall back to the first collection the product belongs to.
{%- endcomment -%}
{%- assign primary_collection = collection | default: product.collections.first -%}

{%- if primary_collection -%}
  <p
    class="product-collection"
    style="
      --pc-mt: {{ s.margin_top | default: 0 }}px;
      --pc-mb: {{ s.margin_bottom | default: 8 }}px;
      --pc-fs: {{ s.font_size | default: 14 }}px;
    "
  >
    {%- if s.label != blank -%}
      <span class="product-collection__label">
        {{ s.label }}
      </span>
    {%- endif -%}

    {%- if s.show_link -%}
      <a class="product-collection__link" href="{{ primary_collection.url }}">
        {{ primary_collection.title }}
      </a>
    {%- else -%}
      <span class="product-collection__link">
        {{ primary_collection.title }}
      </span>
    {%- endif -%}
  </p>
{%- endif -%}