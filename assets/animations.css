/* =======================================================
   BLOCK LEGENDS — RARITY HIGHLIGHT STYLES + ANIMATIONS
   (Clean regen — single source of truth)
   ======================================================= */

/* ----------------------------
   BASE HIGHLIGHT STYLING
----------------------------- */

/* Base highlight — prepare for movement */
.piht__hl{
  display:inline-block;
  position:relative;
  color:var(--piht-hl,currentColor);
  transition:transform .2s ease,text-shadow .2s ease,opacity .2s ease;
}

/* Optional: stronger weight from settings */
.piht__hl--bold{ font-weight:700; }

/* ============================
   RARITY VARIANTS — BASE LOOKS
   ============================ */

/* Common – no animation */
.piht__hl--common{
  text-shadow:none;
}

/* Rare – mild blue glow + gentle bob */
.piht__hl--rare{
  text-shadow:
    0 0 8px rgba(59,130,246,.40),
    0 0 16px rgba(59,130,246,.20);
  animation:bl-rare-bob 2.4s ease-in-out infinite;
}

/* Epic – magenta/violet pulse */
.piht__hl--epic{
  color:#c026d3;
  text-shadow:
    0 0 6px rgba(192,38,211,.60),
    0 0 14px rgba(124,58,237,.40);
  animation:bl-epic-pulse 1.4s ease-in-out infinite;
}

/* Legendary – gold glow + moving shine streak (no background box) */
.piht__hl--legendary{
  color:#facc15;
  background:none;
  -webkit-background-clip:initial;
  background-clip:initial;
  text-shadow:
    0 0 4px rgba(250,204,21,.70),
    0 0 12px rgba(250,204,21,.45);
  position:relative;
  overflow:visible;
}

/* thin shine streak sweeping across the letters */
.piht__hl--legendary::after{
  content:'';
  position:absolute;
  top:-10%;
  left:-40%;
  width:40%;
  height:140%;
  background:linear-gradient(90deg,transparent,rgba(255,255,255,.95),transparent);
  transform:skewX(-20deg);
  opacity:0;
  pointer-events:none;
  animation:bl-legendary-shine 2.8s linear infinite;
}

/* Special – drifting label */
.piht__hl--special{
  text-shadow:
    0 0 8px rgba(4,120,87,.60),
    0 0 16px rgba(4,120,87,.30);
  animation:bl-special-float 2.8s ease-in-out infinite;
}

/* =======================================================
   MYTHICAL — SATURATED BLOOD RED WITH GOOEY DROPS
   ======================================================= */

.piht__hl--mythical{
  position: relative;
  display: inline-block;
  color:var(--piht-myth-color,#ff1b1b);
  letter-spacing: -.02em;
  font-weight:800;
  font-size:1.05em;
  text-shadow:
    0 0 6px color-mix(in srgb, var(--piht-myth-color,#ff1b1b) 78%, #000 22%),
    0 0 14px color-mix(in srgb, var(--piht-myth-color,#ff1b1b) 62%, #000 38%);
  filter:none;
  overflow: visible;
  animation: bl-myth-glow 2.3s ease-in-out infinite;
}

.piht__hl--mythical .piht__hl-char{
  position:relative;
  display:inline-block;
  transform-origin: 50% 60%;
  --piht-char-tilt: 0deg;
  animation: bl-myth-wobble calc(1s + (var(--piht-char-index, 1) * .12s)) ease-in-out infinite;
  animation-delay: calc(var(--piht-char-index, 1) * 90ms * -1);
}


.piht--pill .piht__hl--mythical{
  background:none;
  padding:0;
  border-radius:0;
  box-shadow:none;
}

.piht__hl--mythical .piht__hl-drop{
  position:absolute;
  width:.18em;
  height:.18em;
  border-radius:0 100% 100% 100%;
  background-color: currentColor;
  top:68%;
  transform: translateY(0) scaleX(.9) rotate(45deg);
  animation: bl-myth-drop 1.35s infinite both;
}

.piht__hl--mythical .piht__hl-drop--1{ left:14%; }
.piht__hl--mythical .piht__hl-drop--2{ left:38%; animation-delay:-.4s; }
.piht__hl--mythical .piht__hl-drop--3{ left:55%; animation-delay:-1.3s; }
.piht__hl--mythical .piht__hl-drop--4{ left:78%; animation-delay:-.8s; }
.piht__hl--mythical .piht__hl-drop--5{ left:94%; animation-delay:-1.6s; }

@keyframes bl-myth-glow{
  0%,100%{
    text-shadow:
      0 0 4px rgba(255,80,80,.98),
      0 0 10px rgba(210,0,20,.98);
  }
  45%{
    text-shadow:
      0 0 8px rgba(255,105,105,1),
      0 0 16px rgba(215,0,25,.98);
  }
}

@keyframes bl-myth-drip{
  0%,100%{ transform:translateX(-50%) scaleY(.86); opacity:.8; }
  35%{ transform:translateX(-50%) scaleY(1.05); opacity:1; }
  70%{ transform:translateX(-50%) scaleY(.9); opacity:.85; }
}

@keyframes bl-myth-drop{
  0%{
    transform: translateY(0) scaleX(.9) rotate(45deg);
    animation-timing-function: ease-out;
    opacity:1;
  }
  30%{
    transform: translateY(190%) scaleX(.86) rotate(45deg);
    animation-timing-function: ease-in;
  }
  55%{
    transform: translateY(480%) scaleX(.88) rotate(45deg);
    opacity:.98;
  }
  76%{
    transform: translateY(860%) scaleX(.9) rotate(45deg);
    opacity:.9;
  }
  100%{
    transform: translateY(1440%) scaleX(.92) rotate(45deg);
    opacity:0;
  }
}

@keyframes bl-myth-wobble{
  0%,100%{ transform: translateY(0) rotate(var(--piht-char-tilt, 0deg)) scale(1); }
  32%{ transform: translateY(-1px) rotate(calc(var(--piht-char-tilt, 0deg) - 2deg)) scale(1.05); }
  64%{ transform: translateY(1px) rotate(calc(var(--piht-char-tilt, 0deg) + 2deg)) scale(.96); }
}

/* =======================================================
   ANIMATIONS (KEYFRAMES)
   ======================================================= */

/* Rare – gentle bob */
@keyframes bl-rare-bob{
  0%,100%{ transform:translateY(0); opacity:.95; }
  50%{ transform:translateY(-2px); opacity:1; }
}

/* Epic – quick “hero” pulse */
@keyframes bl-epic-pulse{
  0%,100%{ transform:scale(1) translateY(0); }
  30%{ transform:scale(1.05) translateY(-1px); }
  60%{ transform:scale(1.02) translateY(0); }
}

/* Legendary – moving shine stripe */
@keyframes bl-legendary-shine{
  0%{ left:-40%; opacity:0; }
  20%{ opacity:1; }
  60%{ left:140%; opacity:0; }
  100%{ left:140%; opacity:0; }
}

/* Special – float / drift */
@keyframes bl-special-float{
  0%,100%{ transform:translateY(0) translateX(0); }
  25%{ transform:translateY(-2px) translateX(1px); }
  50%{ transform:translateY(-3px) translateX(0); }
  75%{ transform:translateY(-2px) translateX(-1px); }
}


/* Accessibility: reduce motion if user prefers */
@media (prefers-reduced-motion: reduce){
  .piht__hl--rare,
  .piht__hl--epic,
  .piht__hl--legendary,
  .piht__hl--mythical,
  .piht__hl--special{
    animation:none !important;
    transform:none !important;
    text-shadow:none !important;
  }

  .piht__hl--legendary::after,
  .piht__hl--mythical::before,
  .piht__hl--mythical::after,
  .piht__hl--mythical .piht__hl-char::before,
  .piht__hl--mythical .piht__hl-drop{
    animation:none !important;
    opacity:0 !important;
    height:0 !important;
    width:0 !important;
  }
}
